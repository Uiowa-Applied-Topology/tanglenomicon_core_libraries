{% extends "!layout.html" %}
{% block extrahead %}
<script>
    window.MathJax = {
        loader: {
            load: ['[img]/img.min.js', '[tex]/color', '[tex]/amscd'],
            paths: {img: 'https://cdn.jsdelivr.net/npm/mathjax-img@3'}
        },
        tex: {
            inlineMath: [["$", "$"], ["\\(", "\\)"]],
            displayMath: [["$$", "$$"], ["\\[", "\\]"]],
            processEscapes: true,
            processEnvironments: true,
            extensions: ["autoload-all.js", "AMSmath.js", "AMSsymbols.js", "AMScd.js"],
            packages: {'[+]': ['img', 'color', 'amscd']}
        },
        options: {
            processHtmlClass: "tex2jax_process|mathjax_process|math|output_area",
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    };
    MathJax.startup = {
        ready() {
            MathJax.startup.defaultReady();
            MathJax.startup.promise.then(() => {
                console.log("Start startup promise");
                //
                document.querySelectorAll("mjx-container").forEach(function (x) {
                    x.parentElement.classList += ' has-jax '
                })
                //
                document.querySelectorAll("mjx-container img").forEach((element) => {
                    var src = element.getAttribute("src");
                    if (src.endsWith('.svg') == true) {
                        fetch(src)
                            .then(res => res.text())
                            .then(res => {
                                const holder = document.createElement('div')
                                holder.style.width = "1em";
                                holder.style.height = "1em";
                                holder.innerHTML = res
                                element.replaceWith(holder)
                            })
                    }
                });
                //
                console.log("End startup promise");
            });
        }
    };
</script>


<!-- Preamble -->
<p hidden>
    `$\newcommand{\N}{\mathbb{N}}
    \newcommand{\Z}{\mathbb{Z}}
    \newcommand{\Q}{\mathbb{Q}}
    \newcommand{\R}{\mathbb{R}}
    \newcommand{\LN}{\left.}
    \newcommand{\RN}{\right.}
    \newcommand{\LP}{\left(}
    \newcommand{\RP}{\right)}
    \newcommand{\LS}{\left\lbrace}
    \newcommand{\RS}{\right\rbrace}
    \newcommand{\LA}{\left\langle}
    \newcommand{\RA}{\right\rangle}
    \newcommand{\LB}{\left[}
    \newcommand{\RB}{\right]}
    \newcommand{\MM}{\ \middle|\ }
    \newcommand{\exp}{\text{exp}}
    \newcommand{\abs}[1]{\left\vert#1\right\vert}
    \newcommand{\msr}[1]{m\left(#1\right)}
    \newcommand{\inv}[1]{ #1^{-1}}
    \newcommand{\bkt}[1]{\LA \img{ #1}\RA}
    \require{color}$
</p>
<style>

</style>
{% endblock %}